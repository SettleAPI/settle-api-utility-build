(this["webpackJsonpsettle-api-utility"]=this["webpackJsonpsettle-api-utility"]||[]).push([[0],{136:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(42),s=a.n(l),c=(a(60),a(43)),o=a(1),i=a.n(o),u=a(6),m=a(44),p=a(45),d=a(54),h=a(53),E=a(2),g=a(8),v=a(46),b=a.n(v),k=a(47),f=a.n(k),y=0,N=function(e){var t='{"uri":"'.concat(e,'","trackConversion":false}');return btoa(t)},C={outcomeDescriptions:{1003:"Waiting for customer \u23f1",2e3:"Payment captured \ud83e\udd11",3008:"Payment authorized, ready for capture \ud83d\udcaa",4004:"No such customer \ud83e\udd37\u200d\u2642\ufe0f",4019:"Merchant aborted payment before capture \ud83d\ude22",5006:"Customer rejected payment request \ud83d\ude22",5011:"Payment request expired \u23f1",5012:"Authorization not captured within 3 days \u23f1"},paymentStatus:{OK:"ok",PENDING:"pending",AUTH:"auth",FAIL:"fail"},paymentStatusCodes:{PENDING:1003,OK:2e3,AUTH:3008,NOT_FOUND:4004,ABORTED:4019,REJECTED:5006,REQUEST_EXPIRED:5011,AUTH_EXPIRED:5012},doRequest:function(){var e=Object(u.a)(i.a.mark((function e(t,a,n,r){var l,s,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.merchantId,s=n.userId,c=n.secret,console.debug("[".concat(++y,"] REQUEST"),t,a,n,r),e.prev=2,e.next=5,f()({method:t,url:a,data:r,headers:{Accept:"application/vnd.mcash.api.merchant.v1+json","Content-Type":"application/json","x-auka-merchant":l,"X-Auka-User":s,Authorization:"SECRET ".concat(c)}});case 5:return o=e.sent,console.debug("[".concat(y,"] RESPONSE ").concat(o.status,":"),o.data),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0.response?console.debug("[".concat(y,"] RESPONSE ").concat(e.t0.response.status,":"),e.t0.response.data):console.debug("[".concat(y,"] RESPONSE ").concat(e.t0,":"),e.t0),console.error(e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),getFirebaseLongDynamicLinkUrl:function(e,t,a){var n="https";return a&&(n=t.ius),["".concat(n,"://").concat(t.baseUrl),"?apn=".concat(t.apn),"&ibi=".concat(t.ibi),"&isi=".concat(t.isi),"&ius=".concat(t.ius),"&link=".concat(encodeURIComponent("https://".concat(t.env,"://qr/").concat(e)))].join("")},getAppCustomProps:N,getDeepLinkUrl:function(e,t){return["".concat(t.scheme,"://").concat(t.baseUrl),"?action=settle:scan","&customProps=".concat(N(e)),"&dismissAfterInteraction=true"].join("")},getShortlinkUrl:function(e,t){return"http://settle.eu/s/".concat(e,"/").concat(t)},getPaymentlinkUrl:function(e){return"http://settle.eu/p/".concat(e)},getCheckoutPortalUrl:function(e,t){return"https://".concat(t,"/checkout_portal/p/").concat(e,"/")}},S=a(7),x=a.n(S),w=a(48),I=a.n(w),P=a(49),O=a.n(P),R=a(50),q=a.n(R),U=(a(136),new I.a({length:10})),A=1,T=2,L=3,_=4,F="phonenumber",D="paymentlink",M="shortlink_reuse",j="shortlink_single";function Q(){var e=Object(E.f)();return r.a.createElement("div",null,r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,e.pathname)))}function W(){var e=["Margherita","Vesuvio","Campagnola","Bolognese","Fungi","Capricciosa","Bussola","Opera","Marinara","Coprese","Pasana","Miami","Bari","Quattro stagioni","Prima vera","Marina","Roma","Keven","Black & White","Ciao ciao","Calzone","Viking","Ufo","Disco","Azteka","Mexicana","Acapulco"];return e[Math.floor(Math.random()*e.length)]}function G(){var e=[{name:"\ud83c\udf50 Pear      ",price:2},{name:"\ud83c\udf4e Apple   ",price:2},{name:"\ud83c\udf4c Banana ",price:3},{name:"\ud83c\udf47 Grapes ",price:4},{name:"\ud83e\udd6d Mango  ",price:5},{name:"\ud83c\udf52 Cherry  ",price:6}];for(var t=[];t.length<3;){var a=e[Math.floor(Math.random()*e.length)];t.includes(a)||t.push(a)}var n=t.map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return Math.floor(Math.random()*Math.floor(e))}(3)+1;return{name:e.name,amount:t,price:e.price*t}}));return{formattedList:n.map((function(e){return function(e,t,a){return" ".concat(t," x\t").concat(e,"              \t").concat(a," kr\n")}(e.name,e.amount,e.price)})).join(""),totalCost:100*n.reduce((function(e,t){return e+t.price}),0)}}function z(e,t){var a=localStorage.getItem("settle-api-utility.config.".concat(e));"true"===a?a=!0:"false"===a&&(a=!1);var n=null!==a?a:t;return console.log("Option ".concat(e,":"),n),n}function B(e,t){localStorage.setItem("settle-api-utility.config.".concat(e),t)}function H(e){return{merchantId:z("credentials.".concat(e,".merchantId"),""),userId:z("credentials.".concat(e,".userId"),""),secret:z("credentials.".concat(e,".secret"),"")}}var K=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(m.a)(this,a),n=t.call(this,e);var r=G(),l=z("environment","sandbox"),s={prod:H("prod"),sandbox:{merchantId:z("credentials.".concat(l,".merchantId"),x.a.sandbox.testMerchantId),userId:z("credentials.".concat(l,".userId"),x.a.sandbox.testUserId),secret:z("credentials.".concat(l,".secret"),x.a.sandbox.testSecret)},qa:H("qa"),dev:H("dev")};return n.state={environment:l,credentials:s,shortlinkId:null,shortlinkIdWithCallback:null,shortlinkIdNoCallback:null,callbackUri:z("callbackUri","https://api-utility.settle.eu/callback/"),successReturnUri:z("successReturnUri",""),failureReturnUri:z("failureReturnUri",""),step:1,loadingCredentials:!1,loadingShortlink:!1,loadingRequest:!1,isClaimed:!1,experiment:z("experiment",F),outcome:z("outcome","polling"),phonenumber:z("phonenumber",""),autoCapture:z("autoCapture",!0),advancedOptions:z("advancedOptions",!1),amount:r.totalCost,additionalAmount:z("additionalAmount",0),additionalEdit:z("additionalEdit",!1),allowCredit:z("allowCredit",!0),currency:z("currency","NOK"),customer:"",action:z("action","SALE"),posId:z("posId","demoPos1"),argstring:z("argstring","demoPos1"),requiredScope:z("requiredScope",""),statusLog:[],apiLog:[],paymentResolved:!0},n}return Object(p.a)(a,[{key:"doRequest",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a,n){var r,l,s,c,o,u,m,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.state,l=r.environment,s=r.credentials,c=s[l],o=c.merchantId,u=c.userId,m=c.secret,a.includes("outcome")||this.setState({loadingRequest:!0}),e.prev=3,e.next=6,C.doRequest(t,"/".concat(l).concat(a),{merchantId:o,userId:u,secret:m},n);case 6:return p=e.sent,this.setState({loadingRequest:!1}),a.includes("outcome")||this.addAPILogEntry(t,a,n,p.status),e.abrupt("return",p);case 12:throw e.prev=12,e.t0=e.catch(3),console.log("Check error:",e.t0.response),d=e.t0.response?"".concat(e.t0.response.statusText,". ").concat(e.t0.response.data.error_description?e.t0.response.data.error_description:""):"".concat(e.t0.message),this.addLogEntry(d),this.addAPILogEntry(t,a,n,e.t0.response&&e.t0.response.status),e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"resetOrder",value:function(){var e=this.state,t=e.experiment,a=e.shortlinkId;this.resetPayment(),this.addLogEntry("Generated new order");var n=G(),r=U(),l={posTid:r,amount:n.totalCost,message:"Thanks for trying our ".concat(W()," pizza! \ud83c\udf55")};if(t===j){var s=C.getShortlinkUrl(a,r);l.argstring=r,l.acceptanceUrl=s,this.renderQRCode(s)}this.setState(l)}},{key:"handleResetCustomer",value:function(){this.resetOrder(),this.resetCustomer()}},{key:"resetPayment",value:function(){var e=this.state.experiment,t={loadingRequest:!1,isClaimed:!1,currentTransactionId:null,currentStatus:null,currentStatusCode:null};if(!(e===M||e===j)){var a=document.getElementById("qr");a&&(a.width=a.width),t.acceptanceUrl=""}this.setState(t)}},{key:"renderQRCode",value:function(e){new q.a({element:document.getElementById("qr"),value:e,size:200})}},{key:"handleChange",value:function(e){var t=this,a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;this.setState(Object(c.a)({},r,n),(function(){B(r,n),"callbackUri"===r&&t.setState({shortlinkIdWithCallback:""}),"outcome"===r&&"callback"===n&&t.setState({shortlinkId:t.state.shortlinkIdWithCallback}),"outcome"===r&&"polling"===n&&t.setState({shortlinkId:t.state.shortlinkIdNoCallback,experiment:F}),"argstring"===r&&t.updatePaymentOptions()}))}},{key:"updatePaymentOptions",value:function(){var e=this.state,t=e.shortlinkId,a=e.argstring,n=C.getShortlinkUrl(t,a);this.setState({acceptanceUrl:n}),this.renderQRCode(n)}},{key:"handleChangeCredentials",value:function(e){var t=e.target,a=t.value,n=t.name,r=this.state,l=r.credentials,s=r.environment;this.setState({credentials:O()(l,"".concat(s,".").concat(n),a)}),B("credentials.".concat(s,".").concat(n),a)}},{key:"resetCustomer",value:function(){var e=this.state,t=e.experiment,a=e.phonenumber,n=e.shortlinkIdWithCallback,r=e.shortlinkIdNoCallback,l=null,s="";switch(t){case F:s=a;break;case M:case j:if(this.isOutcomeCallback()){if(!this.state.shortlinkIdWithCallback)throw Error("Unable to get or create shortlink");l=n}else l=r;s="token:"}this.setState({customer:s,shortlinkId:l,loadingRequest:!1})}},{key:"capturePayment",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doRequest("PUT","/merchant/v1/payment_request/".concat(t,"/"),{action:"capture"});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"abortPayment",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.currentTransactionId,e.next=3,this.doRequest("PUT","/merchant/v1/payment_request/".concat(t,"/"),{action:"abort"});case 3:this.addLogEntry("Aborted payment request ".concat(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"releasePayment",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doRequest("PUT","/merchant/v1/payment_request/".concat(t,"/"),{action:"release"});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCapture",value:function(){var e=this.state.currentTransactionId;this.capturePayment(e)}},{key:"handleAbort",value:function(e){var t=this.state.currentTransactionId;this.abortPayment(t)}},{key:"handleRelease",value:function(e){var t=this.state.currentTransactionId;this.releasePayment(t)}},{key:"handleCredentials",value:function(e){var t=this;this.setState({loadingCredentials:!0});var a=this.state,n=a.environment,r=a.credentials[n].userId;this.doRequest("GET","/merchant/v1/api_key/".concat(r,"/"),"").then((function(e){t.setState({loadingCredentials:!1,step:2,isValid:!0,credStatus:"Merchant credentials validated."}),t.addLogEntry("Merchant credentials validated.")})).catch((function(e){t.setState({loadingCredentials:!1,credStatus:e.message})}))}},{key:"prepareExperiment",value:function(){this.setState({argstring:this.state.posId}),this.resetOrder(),this.resetCustomer()}},{key:"handleNext",value:function(e){var t=this.state,a=t.step,n=t.experiment,r=a+1;a!==T-1||n!==F&&n!==D||(r+=1),r===L&&this.prepareExperiment(),this.setState({step:r})}},{key:"handlePrevious",value:function(e){var t=this.state,a=t.step,n=t.experiment,r=a-1;a===L&&(this.prepareExperiment(),n!==F&&n!==D||(r-=1)),this.setState({step:r})}},{key:"handleCreateShortlink",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({loadingShortlink:!0}),e.next=4,this.doRequest("GET","/merchant/v1/shortlink/",{});case 4:a=e.sent,n=a.data.uris,r=n.map((function(e){return l.getLinkUrl(e)})),this.addLogEntry(""),this.addLogEntry("Analysing ".concat(n.length," existing shortlinks")),Promise.all(r).then((function(e){l.createMissingLinks()})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),this.addLogEntry(e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleStopExperiment",value:function(e){this.addLogEntry("Experiment stopped"),this.resetOrder(),this.setState({experimentStarted:!1,step:L,statusLog:[]})}},{key:"addLogEntry",value:function(e){var t=this.state,a=t.statusLog;e!==t.lastStatusMessage&&(console.log("log > ".concat(e)),a.unshift({id:a.length,message:e}),this.setState({statusLog:a,lastStatusMessage:e}))}},{key:"addAPILogEntry",value:function(e,t,a,n){var r=JSON.stringify(a),l=this.state.apiLog;if(l.length>0){var s=l[0];if(s.method===e&&s.endpoint===t&&s.body===r&&s.status===n)return void(l[0].duplicates=s.duplicates+1)}var c={id:l.length,method:e,endpoint:t,body:r,status:n,duplicates:0};l.unshift(c),this.setState({apiLog:l})}},{key:"checkOutcome",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r,l,s,c,o,u,m,p=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.paymentResolved,n=t.currentTransactionId,r=t.autoCapture,l=t.isClaimed,a){e.next=19;break}return e.prev=2,e.next=5,this.doRequest("GET","/merchant/v1/payment_request/".concat(n,"/outcome/"));case 5:s=e.sent,c=s.data,o=c.status,u=c.status_code,m=c.customer,this.addLogEntry(C.outcomeDescriptions[u]),this.setState({currentStatus:o,currentStatusCode:u,customer:m}),o!==C.paymentStatus.OK&&o!==C.paymentStatus.FAIL||this.setState({paymentResolved:!0}),!l&&m.includes("token")&&(this.addLogEntry("Customer scanned QR code"),this.setState({isClaimed:!0})),o===C.paymentStatus.AUTH&&r&&this.capturePayment(n),setTimeout((function(){return p.checkOutcome()}),3e3),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(2),setTimeout((function(){return p.checkOutcome()}),3e3),e.abrupt("return");case 19:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"isOutcomeCallback",value:function(){return"callback"===this.state.outcome}},{key:"isOutcomePolling",value:function(){return"polling"===this.state.outcome}},{key:"createMissingLinks",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.callbackUri,this.state.shortlinkIdWithCallback){e.next=14;break}return e.prev=2,e.next=5,this.doRequest("POST","/merchant/v1/shortlink/",{callback_uri:t});case 5:a=e.sent,n=a.data,this.addLogEntry("Created link ".concat(n.id," with callback ").concat(t)),this.setState({shortlinkIdWithCallback:n.id}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.addLogEntry("Could not create link");case 14:if(this.state.shortlinkIdNoCallback){e.next=26;break}return e.prev=15,e.next=18,this.doRequest("POST","/merchant/v1/shortlink/",{callback_uri:null});case 18:r=e.sent,l=r.data,console.log("Created",l.id,"without callback"),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(15),this.addLogEntry("Could not create link");case 26:this.setState({loadingShortlink:!1,shortlinkId:this.isOutcomeCallback()?this.state.shortlinkIdWithCallback:this.state.shortlinkIdNoCallback});case 27:case"end":return e.stop()}}),e,this,[[2,11],[15,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"createPaymentRequest",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r,l,s,c,o,u,m,p,d,h,E,g,v,b,k,f,y=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.action,n=t.amount,r=t.additionalAmount,l=t.additionalEdit,s=t.allowCredit,c=t.currency,o=t.message,u=t.customer,m=t.currentTransactionId,p=t.posId,d=t.posTid,h=t.requiredScope,E=t.callbackUri,g=t.successReturnUri,v=t.failureReturnUri,b={action:a,amount:parseInt(n),currency:c,pos_id:p,pos_tid:d,allow_credit:s,text:o,additional_amount:parseInt(r),additional_edit:l},""!==h&&(b.required_scope=h),""!==u&&(b.customer=u),this.isOutcomeCallback()&&(b.callback_uri=E),""!==g&&(b.success_return_uri=g),""!==v&&(b.failure_return_uri=v),e.next=9,this.doRequest("POST","/merchant/v1/payment_request/",b);case 9:return k=e.sent,(f=k.data.id)!==m?(this.addLogEntry("Created payment request ".concat(f)),this.setState({currentTransactionId:f,paymentResolved:!1},(function(){y.checkOutcome()}))):this.addLogEntry("Payment already exist ".concat(f)),e.abrupt("return",f);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleStartExperiment",value:function(){var e,t=this,a=this.state,n=a.argstring,r=a.posTid,l=a.experiment,s=a.shortlinkId,c=l===M||l===j;this.resetPayment(),l===M&&(e=C.getShortlinkUrl(s,n)),l===j&&(e=C.getShortlinkUrl(s,r),this.setState({argstring:r})),this.setState({experimentStarted:!0,step:_,acceptanceUrl:e},(function(){c&&t.renderQRCode(e)}))}},{key:"handleCreatePaymentRequest",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.experiment,n=t.acceptanceUrl,e.next=3,this.createPaymentRequest();case 3:r=e.sent,l=n,a===D&&(l=C.getPaymentlinkUrl(r),this.renderQRCode(l)),this.setState({loadingRequest:!1,acceptanceUrl:l});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLinkUrl",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("/"),n=a[a.length-2],e.next=3,this.doRequest("GET","/merchant/v1/shortlink/".concat(n,"/"),{});case 3:r=e.sent,l=r.data,console.log("callback",l.id,l.callback_uri),l.callback_uri||this.state.shortlinkIdNoCallback||(this.setState({shortlinkIdNoCallback:l.id}),s="Using link ".concat(l.id," for outcome polling"),this.addLogEntry(s)),l.callback_uri===this.state.callbackUri&&(this.setState({shortlinkIdWithCallback:l.id}),s="Using link ".concat(l.id," for outcome callback ").concat(l.callback_uri),this.addLogEntry(s));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.step,n=t.experiment,l=t.posId,s=t.posTid,c=t.amount,o=t.credentials,i=t.action,u=t.apiLog,m=t.message,p=t.customer,d=t.currency,h=t.argstring,v=t.statusLog,k=t.credStatus,f=t.successReturnUri,y=t.failureReturnUri,N=t.isClaimed,S=t.phonenumber,w=t.environment,I=t.shortlinkId,P=t.callbackUri,O=t.allowCredit,R=t.autoCapture,q=t.acceptanceUrl,U=t.requiredScope,W=t.additionalEdit,G=t.additionalAmount,z=t.loadingShortlink,B=t.lastStatusMessage,H=t.loadingCredentials,K=t.paymentResolved,V=t.currentStatus,J=t.currentStatusCode,X=t.currentTransactionId,Y=t.loadingRequest,$=t.advancedOptions,Z=n===F,ee=n===D,te=n===M,ae=n===j,ne=te||ae,re=this.isOutcomeCallback(),le=this.isOutcomePolling(),se=C.getFirebaseLongDynamicLinkUrl(q,x.a[w].deeplink,!1),ce=C.getDeepLinkUrl(q,x.a[w].deeplink),oe=C.getCheckoutPortalUrl(X,x.a[w].portal),ie=o[w],ue=ie.merchantId,me=ie.userId;return r.a.createElement(g.a,null,r.a.createElement("main",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"App-content"},r.a.createElement(g.b,{to:"/"},r.a.createElement("img",{src:b.a,className:"App-logo hide-sm",alt:"logo"})),r.a.createElement("nav",{className:"pure-menu pure-menu-horizontal"},r.a.createElement("ul",{className:"pure-menu-list"},r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(g.b,{className:"pure-menu-link",to:"/"},"Home")),r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(g.b,{className:"pure-menu-link",to:"/settings"},"Settings")),"\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement("label",{htmlFor:"advancedOptions",className:"pure-checkbox"},r.a.createElement("input",{type:"checkbox",name:"advancedOptions",id:"advancedOptions",value:"advancedOptions",checked:$,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Advanced options"))),r.a.createElement("div",{className:"App-controls"},r.a.createElement("label",{className:"hide-md"},"\xa0",w,":",ue,":",me)))),r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/settings"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Settings"),r.a.createElement("div",{className:"pure-g"},r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Credentials"),r.a.createElement("p",null,"To access the Settle API, you need to set create an API Key in the ",r.a.createElement("a",{href:"https://business.sandbox.settle.eu",target:"_blank",rel:"noopener noreferrer"},"Settle Business Portal"),"."),r.a.createElement("p",null,"If you haven't done so yet, we have some merchant credentials preset below that you can test with."),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"environment"},"Environment"),r.a.createElement("select",{id:"environment",name:"environment",value:w,onChange:function(t){return e.handleChange(t)}},Object.keys(x.a).map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null,"Merchant ID"),r.a.createElement("input",{name:"merchantId",type:"text",value:o[w].merchantId,onChange:function(t){return e.handleChangeCredentials(t)}})),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null,"User ID"),r.a.createElement("input",{name:"userId",type:"text",value:o[w].userId,onChange:function(t){return e.handleChangeCredentials(t)}})),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null,"Secret"),r.a.createElement("input",{name:"secret",type:"text",value:o[w].secret,onChange:function(t){return e.handleChangeCredentials(t)}})),!H&&r.a.createElement("div",{className:"pure-control-group button-group"},r.a.createElement("button",{className:"pure-button pure-button-primary",type:"button",onClick:function(t){return e.handleCredentials(t)}},"Test")),r.a.createElement("div",{id:"credential-status"},H&&r.a.createElement("div",{className:"loader"}),r.a.createElement("p",null,k))))),r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Outcome"),r.a.createElement("div",null,r.a.createElement("p",null,"To learn the outcome of a payment request, we can either poll for it or register a custom webhook that handles status changes."),r.a.createElement("p",null,"A callback webhook is preferred if the network policy of the POS environment allows for it."),r.a.createElement("p",null,"Some events are only available via callback."),r.a.createElement("h3",null,"Outcome options"),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"polling",className:"pure-radio"},r.a.createElement("input",{type:"radio",name:"outcome",id:"polling",value:"polling",checked:le,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Polling"),r.a.createElement("span",{className:"pure-form-message-inline"},"Continuously poll for changes by calling GET on ",r.a.createElement("strong",null,"/payment_request/<tid>/outcome/"))),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"callback",className:"pure-radio"},r.a.createElement("input",{type:"radio",name:"outcome",id:"callback",value:"callback",checked:re,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Callback"),r.a.createElement("span",{className:"pure-form-message-inline"},'When the status of the payment request changes. The data in the "object" part of the message is the same as calling GET on ',r.a.createElement("strong",null,"/payment_request/<tid>/outcome/"))),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"callbackUri"},"Callback URI"),r.a.createElement("input",{className:"pure-input-1",name:"callbackUri",type:"text",id:"callbackUri",value:P,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"URL for webhook handling callbacks"))))))))),r.a.createElement(E.a,{path:"/"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,function(){switch(n){case F:return"Phonenumber flow";case D:return"Paymentlink flow";case M:return"Shortlink (reuseable) flow";case j:return"Shortlink (single use) flow";default:return""}}()),r.a.createElement("div",{className:"pure-g"},a===A&&r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Choose experiment"),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"phonenumber",className:"pure-radio"},r.a.createElement("input",{type:"radio",name:"experiment",id:"phonenumber",value:"phonenumber",checked:Z,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Phonenumber"),r.a.createElement("span",{className:"pure-form-message-inline"},"Send payment request to user phone.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"paymentlink",className:"pure-radio"},r.a.createElement("input",{type:"radio",name:"experiment",id:"paymentlink",value:"paymentlink",checked:ee,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Paymentlink"),r.a.createElement("span",{className:"pure-form-message-inline"},"Create payment request to be claimed by user.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"shortlink_reuse",className:"pure-radio"},r.a.createElement("input",{type:"radio",name:"experiment",id:"shortlink_reuse",value:"shortlink_reuse",checked:te,disabled:le,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Shortlink (reuseable)"),r.a.createElement("span",{className:"pure-form-message-inline"},"When user scans, create payment request for user.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"shortlink_single",className:"pure-radio"},r.a.createElement("input",{type:"radio",name:"experiment",id:"shortlink_single",value:"shortlink_single",checked:ae,disabled:le,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Shortlink (single use)"),r.a.createElement("span",{className:"pure-form-message-inline"},"When user scans, create payment request based on information embeded in the Shortlink.")),r.a.createElement("div",null,r.a.createElement("div",{className:"pure-control-group button-group"},r.a.createElement("button",{className:"pure-button pure-button-primary",type:"button",onClick:function(t){return e.handleNext(t)}},"Next")))))),a===T&&r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Shortlinks"),r.a.createElement("div",null,r.a.createElement("p",null,"A Shortlink is a placeholder and trigger point for payment request creation. Shortlinks can only handle one customer at a time, but can be reused my many different customers. As the POS usually only service one customer at a time, having one dedicated Shortlink per POS is usually fine. "),r.a.createElement("p",null,"To avoid unnecessary API calls during the payment cycle it's best to create dedicated Shortlinks as part of the POS setup phase. "),r.a.createElement("p",null,"In this experiment we will first try to retrieve any current links for this merchant and otherwise create a new one with the desired callback URL."),r.a.createElement("div",{className:"pure-control-group button-group"},!z&&!I&&r.a.createElement("button",{className:"pure-button pure-button-primary",type:"button",onClick:function(t){return e.handleCreateShortlink(t)}},"Retrieve shortlinks"),z&&r.a.createElement("div",{className:"loader"}),!z&&I&&r.a.createElement("span",null,"Done!")),r.a.createElement("p",null),r.a.createElement("div",{className:"pure-control-group button-group"},r.a.createElement("button",{className:"pure-button",type:"button",onClick:function(t){return e.handlePrevious(t)}},"Go back"),r.a.createElement("button",{className:"pure-button pure-button-primary",type:"button",disabled:!I,onClick:function(t){return e.handleNext(t)}},"Next")))))),a===L&&r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Test POS"),r.a.createElement("p",null,"Here we are preparing a fake order in our siplified test POS system, to be paid with Settle."),r.a.createElement("div",{className:"container",id:"transaction"},r.a.createElement("h3",null,"Order details"),r.a.createElement("p",null,r.a.createElement("strong",null,"Order ID:")," ",s),r.a.createElement("p",null,r.a.createElement("strong",null,"Amount:")," ",c/100," ",d),r.a.createElement("div",null,r.a.createElement("strong",null,"Message:")),r.a.createElement("pre",null,m),$&&r.a.createElement("p",null,r.a.createElement("strong",null,"POS ID:")," ",l),$&&ne&&r.a.createElement("p",null,r.a.createElement("strong",null,"Shortlink ID:")," ",I),r.a.createElement("p",null),$&&r.a.createElement("button",{className:"pure-button",type:"button",disabled:!K,onClick:function(t){return e.resetOrder(t)}},"Generate demo order"),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("div",{className:"pure-control-group button-group"},!z&&r.a.createElement("button",{className:"pure-button",type:"button",onClick:function(t){return e.handlePrevious(t)}},"Go back"),!Y&&r.a.createElement("button",{className:"pure-button pure-button-primary",disabled:ne&&!I,type:"button",onClick:function(t){return e.handleStartExperiment(t)}},"Start experiment"),Y&&r.a.createElement("div",{className:"loader"}))))))),a===L&&r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Settle payment request"),r.a.createElement("div",{className:"container",id:"transaction"},r.a.createElement("p",null,"The customer can either reject or authorize a payment request. An authorization is valid for 3 days, but can be reauthorized before it expires to be valid for 3 new days. Once the payment is authorized, it can be captured to be included in the next settlement."),$&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Request options"),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"action"},"Action"),r.a.createElement("input",{className:"pure-input-1-4",name:"action",type:"text",id:"action",value:i,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",d," (in cents)"),r.a.createElement("input",{className:"pure-input-1-4",name:"amount",type:"number",id:"amount",value:c,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"The base amount of the payment.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"currency"},"Currency"),r.a.createElement("input",{className:"pure-input-1-4",name:"currency",type:"text",id:"currency",value:d,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"Three (3) chars following ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/ISO_4217"},"ISO 4217"))),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"message"},"Payment message"),r.a.createElement("input",{className:"pure-input-1",name:"message",type:"text",id:"message",value:m,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"additionalAmount"},"additionalAmount (in cents)"),r.a.createElement("input",{className:"pure-input-1-4",name:"additionalAmount",type:"number",id:"additionalAmount",value:G,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"Typically a cash withdrawal or gratuity")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"callbackUri"},"Callback URI"),r.a.createElement("input",{className:"pure-input-1",name:"callbackUri",type:"text",id:"callbackUri",value:re?P:"",onChange:function(t){return e.handleChange(t)},disabled:le}),r.a.createElement("span",{className:"pure-form-message-inline"},"URL for server handling callbacks.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"additionalEdit"},r.a.createElement("input",{type:"checkbox",name:"additionalEdit",id:"additionalEdit",value:"additionalEdit",checked:W,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Additional edit"),r.a.createElement("span",{className:"pure-form-message-inline"},"Whether user is allowed to add additional amount for gratuity or similar.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"allowCredit"},r.a.createElement("input",{type:"checkbox",name:"allowCredit",id:"allowCredit",value:"allowCredit",checked:O,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Allow credit funding"),r.a.createElement("span",{className:"pure-form-message-inline"},"Whether to allow credit payment for this payment request. Credit incurs interchange.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"customer"},"Customer"),r.a.createElement("input",{className:"pure-input-2-4",name:"customer",type:"text",id:"customer",value:p,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"posId"},"POS ID"),r.a.createElement("input",{className:"pure-input-1-4",name:"posId",type:"text",id:"posId",value:l,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"The POS this payment request originates from, used for informing users.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"posTid"},"POS Transaction ID"),r.a.createElement("input",{className:"pure-input-3-4",name:"posTid",type:"text",id:"posTid",value:s,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"Local transaction id for POS. This must be unique for the POS.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"requiredScope"},"Required scope"),r.a.createElement("input",{className:"pure-input-3-4",name:"requiredScope",type:"text",id:"requiredScope",value:U,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"Set this field to ask for data from the user together with the payment request.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"successReturnUri"},"Success URI"),r.a.createElement("input",{className:"pure-input-3-4",name:"successReturnUri",type:"text",id:"successReturnUri",value:f,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"Return URL if payment successful.")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"failureReturnUri"},"Failure URI"),r.a.createElement("input",{className:"pure-input-3-4",name:"failureReturnUri",type:"text",id:"failureReturnUri",value:y,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"Return URL if payment failed."))))))),a===_&&r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("h2",null,"Test POS")),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"POS ID"),":",r.a.createElement("br",null),l),r.a.createElement("strong",null,"Status:")),r.a.createElement("pre",null,B),r.a.createElement("p",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Order ID"),":",r.a.createElement("br",null),s),r.a.createElement("p",null,r.a.createElement("strong",null,"Amount"),":",r.a.createElement("br",null),c/100," ",d),r.a.createElement("div",null,r.a.createElement("strong",null,"Message:")," "),r.a.createElement("pre",null,m)),r.a.createElement("p",null),ne&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Shortlink ID:")," ",r.a.createElement("br",null),I),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"argstring"},"Argstring for shortlink"),r.a.createElement("input",{className:"pure-input-1",name:"argstring",type:"text",id:"argstring",value:h,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("span",{className:"pure-form-message-inline"},"Optional payload at the end of the shortlink url. It's attatched to the callback and can be used in cases where the QR code generation happens in a separate system from the callback handling.")),r.a.createElement("div",{className:"pure-control-group button-group"},r.a.createElement("button",{disabled:!K,className:"pure-button",type:"button",onClick:function(t){return e.handleStopExperiment(t)}},"Go back"),r.a.createElement("button",{className:"pure-button",type:"button",disabled:!K,onClick:function(t){return e.resetOrder(t)}},"New order"),r.a.createElement("button",{disabled:!K,className:"pure-button",type:"button",onClick:function(t){return e.handleResetCustomer(t)}},"Reset"))))),a===_&&r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("h2",null,"Settle payment request"),r.a.createElement("p",null,r.a.createElement("strong",null,"TID:")," ",X||"N/A"),r.a.createElement("p",null,r.a.createElement("strong",null,"Status Code:")," ",J?"".concat(J):"N/A"," "),r.a.createElement("p",null,r.a.createElement("strong",null,"Status Type:")," ",r.a.createElement("span",{style:{textTransform:"uppercase"}},V?"".concat(V):"N/A"," ")),r.a.createElement("p",null,r.a.createElement("strong",null,"Customer:")," ",p||"N/A")),ne&&r.a.createElement("aside",{className:"warn-block"},'In this experiment we must first scan the static QR, then manually retrieve the "scan token" via the callback URL, and use it as in customer field of the request.'),r.a.createElement("div",{className:"pure-control-group button-group"},r.a.createElement("button",{className:"pure-button pure-button-primary",type:"button",disabled:!K||Y,onClick:function(t){return e.handleCreatePaymentRequest(t)}},"Create"),r.a.createElement("button",{className:"pure-button pure-button-danger",type:"button",disabled:K||Y,onClick:function(t){return e.handleAbort(t)}},"Abort"),r.a.createElement("button",{className:"pure-button",type:"button",disabled:K||Y,onClick:function(t){return e.handleCapture(t)}},"Capture"),r.a.createElement("button",{className:"pure-button",type:"button",disabled:K||Y,onClick:function(t){return e.handleRelease(t)}},"Release")),$&&r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"autoCapture",className:"pure-checkbox"},r.a.createElement("input",{type:"checkbox",name:"autoCapture",id:"autoCapture",value:"autoCapture",checked:R,onChange:function(t){return e.handleChange(t)}}),"\xa0\xa0Auto capture"),r.a.createElement("span",{className:"pure-form-message-inline"},"Capture authorized payments automatically. If not set, manual capture needs to happen within 72 hours, else the auth will expire and the money will be refunded."))))),a===_&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},ee&&!X&&r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Customer payment options"),r.a.createElement("p",null,"Create a payment request to see the various payment options.")),(ee&&X||ne)&&r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Customer payment options"),r.a.createElement("p",null,r.a.createElement("strong",null,"Acceptance URL:")," ",r.a.createElement("br",null),q),r.a.createElement("p",null,r.a.createElement("strong",null,"Scanned:")," ",N?"Yes":"No"),r.a.createElement("canvas",{id:"qr",className:N?"active-border":"inactive-border"}),r.a.createElement("p",null,r.a.createElement("a",{className:"pure-button pure-button-secondary",target:"_new",href:se},"Open Settle App")),$&&r.a.createElement("p",null,r.a.createElement("a",{className:"pure-button pure-button-secondary",target:"_new",href:ce},"Open Settle App (webview)")),$&&r.a.createElement("p",null,r.a.createElement("a",{className:"pure-button pure-button-secondary",target:"_new",href:oe},"Open Checkout Portal")),r.a.createElement("p",null)),Z&&r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Customer payment options"),r.a.createElement("p",null,r.a.createElement("strong",null,"Phonenumber:"),S)))),a===A&&r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-3-3"},r.a.createElement("div",{className:"box"},Z&&r.a.createElement("div",null,r.a.createElement("h3",null,"Phone number"),r.a.createElement("p",null,"Send payment request directly to the customer device when POS have access to customer data (or can easily accept phone number as input from customer)."),r.a.createElement("ol",null,r.a.createElement("li",null,"POS creates local order with unique id."),r.a.createElement("li",null,"POS creates payment request for customer phone number."),r.a.createElement("li",null,"Settle pushes payment request to the customer."),r.a.createElement("li",null,"Settle calls back to POS with outcome.")),r.a.createElement("p",null,r.a.createElement("em",null,"Example:")," Vending machine, web-shop, recurring payments")),Z&&r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("h3",null,"Experiment options"),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"phonenumber"},"Recipient phone number"),r.a.createElement("input",{className:"pure-input-2-5",name:"phonenumber",type:"text",id:"phonenumber",value:S,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"pure-form-message-inline"},"Needs to be ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/MSISDN"},"MSISDN")," formatted"))),ee&&r.a.createElement("div",null,r.a.createElement("h3",null,"Paymentlink"),r.a.createElement("p",null,"The easiest method, as we gather order details and then create payment request that we can then link to for some user to later claim."),r.a.createElement("ol",null,r.a.createElement("li",null,"POS creates local order with unique id."),r.a.createElement("li",null,"POS creates payment request."),r.a.createElement("li",null,"POS creates unique Paymentlink QR code."),r.a.createElement("li",null,"Customer scans QR code."),r.a.createElement("li",null,"Settle pushes payment request to the customer."),r.a.createElement("li",null,"Settle calls back to POS with outcome.")),r.a.createElement("p",null,r.a.createElement("em",null,"Example:")," Modern cash registers, mobile pos, card terminals, web-shops.")),te&&r.a.createElement("div",null,r.a.createElement("h3",null,"Shortlink (reusable)"),r.a.createElement("p",null,"Mainly used for printed QR codes, on posters and newspaper ads."),r.a.createElement("p",null,"Payment request sent when a user interacts with a Shortlink that was created during POS setup."),r.a.createElement("p",null,"The Shortlink acts as a proxy between the user and a payment, and can be reused as many times as needed, even by diffrent users."),r.a.createElement("p",null,"QR created when POS device is turned on or registered."),r.a.createElement("ol",null,r.a.createElement("li",null,"Setup: POS creates Shortlink."),r.a.createElement("li",null,"Setup: POS creates Shortlink QR code."),r.a.createElement("li",null,"Customer scans reusable Shortlink QR code."),r.a.createElement("li",null,"Settle calls back to POS with customer identifier."),r.a.createElement("li",null,"POS creates payment request for customer identifier."),r.a.createElement("li",null,"Settle pushes payment request to the customer."),r.a.createElement("li",null,"Settle calls back to POS with outcome.")),r.a.createElement("p",null,r.a.createElement("em",null,"Example:")," POS device without customer facing display, requiring pre-printed QR code.")),ae&&r.a.createElement("div",null,r.a.createElement("h3",null,"Shortlink (single use)"),r.a.createElement("p",null,"Useful pattern to pass along a local transaction id when the device handling the customer and is not receiving the callback."),r.a.createElement("p",null,"The local transaction id is passed along by Settle and can be picked up by centralised middleware to understand what POS device and purchase the request originated from."),r.a.createElement("p",null,"QR created when POS device is turned on or registered."),r.a.createElement("ol",null,r.a.createElement("li",null,"Setup: POS creates Shortlink."),r.a.createElement("li",null,"Setup: POS creates Shortlink QR code with local id."),r.a.createElement("li",null,"Customer scans Shortlink QR code."),r.a.createElement("li",null,"Settle calls back to POS with customer identifier and local id."),r.a.createElement("li",null,"POS creates payment request for customer identifier."),r.a.createElement("li",null,"Settle pushes payment request to the customer."),r.a.createElement("li",null,"Settle calls back to POS with outcome.")),r.a.createElement("p",null,r.a.createElement("em",null,"Example:")," Card terminals")))),a>=_&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Experiment log"),r.a.createElement("div",null,v.map((function(e){var t=e.id,a=e.message;return r.a.createElement("div",{key:t,className:"row"},r.a.createElement("div",{className:"pure-u-21-24"},a))}))))),r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"API request log ",Y&&r.a.createElement("div",{className:"loader loader-small"})),r.a.createElement("div",{className:"status"},u.map((function(e){var t=e.id,a=e.method,n=e.endpoint,l=(e.body,e.status),s=e.duplicates;return r.a.createElement("div",{key:t,className:"row pure-g"},r.a.createElement("div",{className:"pure-u-2-24"},s>0&&r.a.createElement("span",{className:"label"},s)),r.a.createElement("div",{className:"pure-u-22-24"},r.a.createElement("strong",null,a)," ",l&&"".concat(l," "),n))}))))))))),r.a.createElement(E.a,{path:"/home"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"API Utility"),r.a.createElement("div",{className:"pure-g"},r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Experiments"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(g.b,{to:"/payment-flows"},"Payment flows")),r.a.createElement("li",null,"Login flows (coming soon)"))))),r.a.createElement("div",{className:"pure-u-1 pure-u-md-1-2 pure-u-lg-1-3"},r.a.createElement("div",{className:"pure-form pure-form-stacked"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",null,"Functions (coming soon)"),r.a.createElement("ul",null,r.a.createElement("li",null,"Payment requests"),r.a.createElement("li",null,"Permission requests"),r.a.createElement("li",null,"Userinfo"),r.a.createElement("li",null,"POS"),r.a.createElement("li",null,"Shortlinks"),r.a.createElement("li",null,"Reports")))))))),r.a.createElement(E.a,{path:"*"},r.a.createElement(Q,null)))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,t,a){e.exports=a.p+"static/media/settle-logo.29d40954.png"},55:function(e,t,a){e.exports=a(141)},60:function(e,t,a){},7:function(e,t){e.exports={prod:{name:"Production",portal:"portal-dot-settle-core-prod.appspot.com",deeplink:{scheme:"settle",env:"settle",baseUrl:"get.settle.eu",apn:"eu.settle.app",ibi:"eu.settle.app",isi:"1440051902",ius:"eu.settle.app.firebaselink"}},sandbox:{name:"Sandbox",portal:"portal-dot-settle-core-demo.appspot.com",deeplink:{scheme:"settle-sandbox",env:"settle-demo",baseUrl:"settledemo.page.link",apn:"eu.settle.app.sandbox",ibi:"eu.settle.app.sandbox",isi:"1453180781",ius:"eu.settle.app.firebaselink"},testUserId:"76pj520h",testMerchantId:"f1645s",testSecret:".IIIXVCFdey3Bo5HD4gQh2+y_Ce9C.qodl_9FB.CQAWHua_rCrpCn3N-YwagvGY7"},qa:{name:"QA",portal:"portal-dot-settle-core-qa.appspot.com",deeplink:{scheme:"settle-qa",env:"settle-qa",baseUrl:"settleqa.page.link",apn:"io.auka.aukasales.qa",ibi:"io.auka.aukasales.qa",isi:"1402708733",ius:"eu.settle.app.firebaselink"}},dev:{name:"Development",portal:"portal-dot-settle-core-dev.appspot.com",deeplink:{scheme:"settle-dev",env:"settle-dev",baseUrl:"settledev.page.link",apn:"io.auka.aukasales.dev",ibi:"io.auka.aukasales.dev",isi:"1395496531",ius:"eu.settle.app.firebaselink"}}}}},[[55,1,2]]]);
//# sourceMappingURL=main.1cdfb1a4.chunk.js.map